(function(e){function t(t){for(var r,o,i=t[0],s=t[1],u=t[2],b=0,p=[];b<i.length;b++)o=i[b],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(p.length)p.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},c=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},2114:function(e,t,n){"use strict";n("775c")},"4e75":function(e,t,n){},"535a":function(e,t,n){"use strict";n("75ee")},"5f77":function(e,t,n){"use strict";n("cd60")},"68dc":function(e,t,n){"use strict";n("4e75")},"75ee":function(e,t,n){},"775c":function(e,t,n){},"8d6e":function(e,t,n){"use strict";n("e153")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a={id:"nav"},c=Object(r["f"])("Plants");function o(e,t){var n=Object(r["x"])("router-link"),o=Object(r["x"])("router-view");return Object(r["q"])(),Object(r["d"])(r["a"],null,[Object(r["g"])("div",a,[Object(r["g"])(n,{to:"/"},{default:Object(r["D"])((function(){return[c]})),_:1})]),Object(r["g"])(o)],64)}n("2114");const i={};i.render=o;var s=i,u=n("6c02"),l={class:"plants-view"};function b(e,t,n,a,c,o){var i=Object(r["x"])("PlantList");return Object(r["q"])(),Object(r["d"])("div",l,[Object(r["g"])(i)])}n("a4d3"),n("e01a");var p=Object(r["F"])("data-v-e4771e0c");Object(r["t"])("data-v-e4771e0c");var O={class:"plants"},j={class:"center"},d=Object(r["g"])("b",null,"Id: ",-1),f={key:0},v=Object(r["g"])("b",null,"Description: ",-1),g=Object(r["g"])("b",null,"Created: ",-1),m={key:1},h=Object(r["g"])("b",null,"Air temperature: ",-1),w=Object(r["g"])("b",null,"Air humidity: ",-1),y=Object(r["g"])("b",null,"Soil temperature: ",-1),x=Object(r["g"])("b",null,"Soil resistivity: ",-1),k=Object(r["g"])("small",null,"(0-1200)",-1);Object(r["r"])();var _=p((function(e,t,n,a,c,o){var i=Object(r["x"])("router-link");return Object(r["q"])(),Object(r["d"])("div",O,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(e.panics,(function(t){return Object(r["q"])(),Object(r["d"])("div",{key:t.id},[Object(r["g"])("div",j,[Object(r["g"])("h4",null,Object(r["z"])(t.plant_id),1),Object(r["g"])("p",null,Object(r["z"])(t.file),1),Object(r["g"])("p",null,Object(r["z"])(t.line),1),Object(r["g"])("p",null,Object(r["z"])(t.func),1),Object(r["g"])("p",null,Object(r["z"])(t.msg),1),Object(r["g"])("p",null,Object(r["z"])(e.formatTime(t.created_at-e.status.now)),1),Object(r["g"])("button",{onClick:function(n){return e.solveDevicePanic(t.id)}},"Solve",8,["onClick"])])])})),128)),(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(e.statuses,(function(t){return Object(r["q"])(),Object(r["d"])("div",{key:t.plant.id},[Object(r["g"])(i,{to:"/plant/".concat(t.plant.id),class:"plant-card"},{default:p((function(){return[Object(r["g"])("p",null,[d,Object(r["f"])(Object(r["z"])(t.plant.id),1)]),t.plant.description?(Object(r["q"])(),Object(r["d"])("p",f,[v,Object(r["f"])(" "+Object(r["z"])(t.plant.description),1)])):Object(r["e"])("",!0),Object(r["g"])("p",null,[g,Object(r["f"])(Object(r["z"])(e.formatTime(t.now-t.plant.created_at))+" ago",1)]),t.event?(Object(r["q"])(),Object(r["d"])("div",m,[Object(r["g"])("p",null,[h,Object(r["f"])(Object(r["z"])(t.event.air_temperature_celsius)+"ºC",1)]),Object(r["g"])("p",null,[w,Object(r["f"])(Object(r["z"])(t.event.air_humidity_percentage)+"%",1)]),Object(r["g"])("p",null,[y,Object(r["f"])(Object(r["z"])(t.event.soil_temperature_celsius)+"ºC",1)]),Object(r["g"])("p",null,[x,Object(r["f"])(" "+Object(r["z"])(t.event.soil_resistivity_raw)+" raw ",1),k]),Object(r["g"])("p",null,"Last Event from "+Object(r["z"])(e.formatTime(t.now-t.event.created_at))+" ago",1)])):Object(r["e"])("",!0)]})),_:2},1032,["to"])])})),128))])})),S=n("2909"),P=n("1da1"),I=(n("96cf"),n("d3b7"),n("f00c"),n("a9e3"),n("fb6a"),n("99af"),{API_HOST:"https://iop-monitor-server.tk:4001"}),z=Object(r["h"])({name:"PlantList",setup:function(){var e=Object(r["u"])([]),t=Object(r["u"])([]);Object(r["o"])(Object(P["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=null!==(r=sessionStorage.getItem("token"))&&void 0!==r?r:void 0,void 0!==a){n.next=5;break}return sessionStorage.removeItem("token"),ke.push({path:"/login"}),n.abrupt("return");case 5:Object(P["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(I.API_HOST,"/v1/panic/index"),{headers:{Authorization:"Basic ".concat(a)}});case 2:if(n=e.sent,403!==n.status){e.next=7;break}return sessionStorage.removeItem("token"),ke.push({path:"/login"}),e.abrupt("return");case 7:return e.next=9,n.json();case 9:r=e.sent,t.push.apply(t,Object(S["a"])(r));case 11:case"end":return e.stop()}}),e)})))(),Object(P["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(I.API_HOST,"/v1/plant/index"),{headers:{Authorization:"Basic ".concat(a)}});case 2:if(n=t.sent,403!==n.status){t.next=7;break}return sessionStorage.removeItem("token"),ke.push({path:"/login"}),t.abrupt("return");case 7:return t.next=9,n.json();case 9:r=t.sent,e.push.apply(e,Object(S["a"])(r));case 11:case"end":return t.stop()}}),t)})))();case 7:case"end":return n.stop()}}),n)}))));var n=function(e){if(e<=0)return"00h:00m";if(!Number.isFinite(e))return"Never";var t=Math.floor(e/3600),n="0".concat(t).slice(-2),r=Math.floor(e/60%60),a="0".concat(r).slice(-2);return"".concat(n,"h:").concat(a,"m")},a=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=null!==(n=sessionStorage.getItem("token"))&&void 0!==n?n:void 0,void 0!==r){e.next=5;break}return sessionStorage.removeItem("token"),ke.push({path:"/login"}),e.abrupt("return");case 5:return e.next=7,fetch("".concat(I.API_HOST,"/v1/panic?id=").concat(t),{method:"DELETE",headers:{Authorization:"Basic ".concat(r)}});case 7:if(a=e.sent,403!==a.status){e.next=12;break}return sessionStorage.removeItem("token"),ke.push({path:"/login"}),e.abrupt("return");case 12:ke.go(0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{statuses:e,panics:t,solveDevicePanic:a,formatTime:n}}});n("68dc");z.render=_,z.__scopeId="data-v-e4771e0c";var T=z,q=Object(r["h"])({name:"PlantListView",components:{PlantList:T}});q.render=b;var R=q,A={class:"plant-view"};function L(e,t,n,a,c,o){var i=Object(r["x"])("Plant");return Object(r["q"])(),Object(r["d"])("div",A,[Object(r["g"])(i)])}n("b0c0");var C=Object(r["F"])("data-v-2c6590ad");Object(r["t"])("data-v-2c6590ad");var E={class:"plant"},B={class:"flex"},H={key:0,class:"info"},V=Object(r["g"])("b",null,"Name: ",-1),M={key:0},N=Object(r["g"])("b",null,"Description: ",-1),D={key:1},F=Object(r["g"])("b",null,"Air temperature: ",-1),U=Object(r["g"])("b",null,"Air humidity: ",-1),J=Object(r["g"])("b",null,"Soil temperature: ",-1),G=Object(r["g"])("b",null,"Soil resistivity: ",-1),K=Object(r["g"])("small",null,"(0-1200)",-1);Object(r["r"])();var Q=C((function(e,t,n,a,c,o){var i=Object(r["x"])("PlantHistory");return Object(r["q"])(),Object(r["d"])("div",E,[Object(r["g"])("div",B,[e.data.status?(Object(r["q"])(),Object(r["d"])("div",H,[Object(r["g"])("p",null,[V,Object(r["f"])(Object(r["z"])(e.data.status.plant.name),1)]),e.data.status.plant.description?(Object(r["q"])(),Object(r["d"])("p",M,[N,Object(r["f"])(Object(r["z"])(e.data.status.plant.description),1)])):Object(r["e"])("",!0),Object(r["g"])("p",null,"Created "+Object(r["z"])(e.formatTime(e.data.status.now-e.data.status.plant.created_at))+" ago",1),e.data.status.event?(Object(r["q"])(),Object(r["d"])("div",D,[Object(r["g"])("p",null,[F,Object(r["f"])(Object(r["z"])(e.data.status.event.air_temperature_celsius)+"ºC",1)]),Object(r["g"])("p",null,[U,Object(r["f"])(Object(r["z"])(e.data.status.event.air_humidity_percentage)+"%",1)]),Object(r["g"])("p",null,[J,Object(r["f"])(Object(r["z"])(e.data.status.event.soil_temperature_celsius)+"ºC",1)]),Object(r["g"])("p",null,[G,Object(r["f"])(" "+Object(r["z"])(e.data.status.event.soil_resistivity_raw)+" raw ",1),K]),Object(r["g"])("p",null,"Event from "+Object(r["z"])(e.formatTime(e.data.status.now-e.data.status.event.created_at))+" ago",1)])):Object(r["e"])("",!0)])):Object(r["e"])("",!0)]),e.data.history?(Object(r["q"])(),Object(r["d"])(i,{key:0,history:e.data.history},null,8,["history"])):Object(r["e"])("",!0)])})),W=Object(r["h"])({name:"Plant",setup:function(){var e=Object(r["u"])({});Object(r["o"])(Object(P["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=Object(u["c"])().params.id,document.title="Plant ".concat(r),a=null!==(n=sessionStorage.getItem("token"))&&void 0!==n?n:void 0,void 0!==a){t.next=7;break}return sessionStorage.removeItem("token"),ke.push({path:"/login"}),t.abrupt("return");case 7:Object(P["a"])(regeneratorRuntime.mark((function t(){var n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=1800,t.next=3,fetch("".concat(I.API_HOST,"/v1/plant/history?id=").concat(r,"&since_secs_ago=").concat(n),{headers:{Authorization:"Basic ".concat(a)}});case 3:if(c=t.sent,403!==c.status){t.next=8;break}return sessionStorage.removeItem("token"),ke.push({path:"/login"}),t.abrupt("return");case 8:return t.next=10,c.json();case 10:e.history=t.sent;case 11:case"end":return t.stop()}}),t)})))(),Object(P["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(I.API_HOST,"/v1/plant?id=").concat(r),{headers:{Authorization:"Basic ".concat(a)}});case 2:if(n=t.sent,403!==n.status){t.next=7;break}return sessionStorage.removeItem("token"),ke.push({path:"/login"}),t.abrupt("return");case 7:return t.next=9,n.json();case 9:e.status=t.sent;case 10:case"end":return t.stop()}}),t)})))();case 9:case"end":return t.stop()}}),t)}))));var t=function(e){if(e<=0)return"00h:00m";if(!Number.isFinite(e))return"Never";var t=Math.floor(e/3600),n="0".concat(t).slice(-2),r=Math.floor(e/60%60),a="0".concat(r).slice(-2);return"".concat(n,"h:").concat(a,"m")};return{data:e,formatTime:t}}});n("535a");W.render=Q,W.__scopeId="data-v-2c6590ad";var X=W,Y=Object(r["h"])({name:"PlantView",components:{Plant:X}});Y.render=L;var Z=Y,$={class:"login-view"};function ee(e,t,n,a,c,o){var i=Object(r["x"])("Login");return Object(r["q"])(),Object(r["d"])("div",$,[Object(r["g"])(i)])}var te=Object(r["F"])("data-v-4e586c01");Object(r["t"])("data-v-4e586c01");var ne={class:"login"},re=Object(r["g"])("label",{for:"email"},"Email:",-1),ae=Object(r["g"])("label",{for:"password"},"Password:",-1);Object(r["r"])();var ce=te((function(e,t,n,a,c,o){return Object(r["q"])(),Object(r["d"])("div",ne,[Object(r["g"])("div",null,[re,Object(r["E"])(Object(r["g"])("input",{type:"text",name:"email","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.user.email=t})},null,512),[[r["B"],e.user.email]])]),Object(r["g"])("div",null,[ae,Object(r["E"])(Object(r["g"])("input",{type:"password",name:"password","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.user.password=t})},null,512),[[r["B"],e.user.password]])]),Object(r["g"])("button",{onClick:t[3]||(t[3]=function(t){return e.login()})},"Login")])})),oe=Object(r["h"])({name:"Login",setup:function(){var e=Object(r["u"])({email:"",password:""});Object(r["o"])((function(){null!==sessionStorage.getItem("token")&&ke.push({path:"/"})}));var t=function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(I.API_HOST,"/v1/user/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 2:if(n=t.sent,200!==n.status){t.next=9;break}return t.t0=sessionStorage,t.next=7,n.text();case 7:t.t1=t.sent,t.t0.setItem.call(t.t0,"token",t.t1);case 9:ke.push({path:"/"});case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{user:e,login:t}}});n("8d6e");oe.render=ce,oe.__scopeId="data-v-4e586c01";var ie=oe,se=Object(r["h"])({name:"LoginView",components:{Login:ie}});se.render=ee;var ue=se,le={class:"signup-view"};function be(e,t,n,a,c,o){var i=Object(r["x"])("Signup");return Object(r["q"])(),Object(r["d"])("div",le,[Object(r["g"])(i)])}var pe=Object(r["F"])("data-v-c088b9d2");Object(r["t"])("data-v-c088b9d2");var Oe={class:"signup"},je=Object(r["g"])("label",{for:"email"},"Email:",-1),de=Object(r["g"])("label",{for:"username"},"Username:",-1),fe=Object(r["g"])("label",{for:"password"},"Password:",-1);Object(r["r"])();var ve=pe((function(e,t,n,a,c,o){return Object(r["q"])(),Object(r["d"])("div",Oe,[Object(r["g"])("div",null,[je,Object(r["E"])(Object(r["g"])("input",{type:"text",name:"email","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.user.email=t})},null,512),[[r["B"],e.user.email]])]),Object(r["g"])("div",null,[de,Object(r["E"])(Object(r["g"])("input",{type:"text",name:"username","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.user.username=t})},null,512),[[r["B"],e.user.username]])]),Object(r["g"])("div",null,[fe,Object(r["E"])(Object(r["g"])("input",{type:"password",name:"password","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.user.password=t})},null,512),[[r["B"],e.user.password]])]),Object(r["g"])("button",{onClick:t[4]||(t[4]=function(t){return e.signup()})},"Signup")])})),ge=Object(r["h"])({name:"Signup",setup:function(){var e=Object(r["u"])({email:"",username:"",password:""});Object(r["o"])((function(){null!==sessionStorage.getItem("token")&&ke.push({path:"/"})}));var t=function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(I.API_HOST,"/v1/user"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 2:if(n=t.sent,200!==n.status){t.next=9;break}return t.t0=sessionStorage,t.next=7,n.text();case 7:t.t1=t.sent,t.t0.setItem.call(t.t0,"token",t.t1);case 9:ke.push({path:"/"});case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{user:e,signup:t}}});n("5f77");ge.render=ve,ge.__scopeId="data-v-c088b9d2";var me=ge,he=Object(r["h"])({name:"SignupView",components:{Signup:me}});he.render=be;var we=he,ye=[{path:"/",name:"Home",meta:{title:"Plants"},component:R},{path:"/login",name:"Login",meta:{title:"Login"},component:ue},{path:"/signup",name:"Signup",meta:{title:"Signup"},component:we},{path:"/plant/:id",name:"Plant",meta:{title:"Plant"},component:Z}],xe=Object(u["a"])({history:Object(u["b"])("/"),routes:ye}),ke=xe;Object(r["c"])(s).use(ke).mount("#app")},cd60:function(e,t,n){},e153:function(e,t,n){}});
//# sourceMappingURL=app.4619f895.js.map